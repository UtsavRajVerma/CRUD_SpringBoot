<!Doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8"></meta>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
    <title>Assignment 1</title>

    <script>
        function passValues(){
            let Uname=document.getElementById("NAME").value;
            localStorage.setItem("Name",Uname);

            let Umail=document.getElementById("EMAIL").value;
            localStorage.setItem("Email",Umail);

            let Umobile=document.getElementById("MOBILE").value;
            localStorage.setItem("Mobile",Umobile);

            let Ustate=document.getElementById("STATE").value;
            localStorage.setItem("State",Ustate);

            let Ugender=document.getElementById("GENDERS").value;
            let gender_value;
                if(document.getElementById("M").checked) gender_value=document.getElementById("M").value;
                else gender_value=document.getElementById("F").value;
            localStorage.setItem("Gender",gender_value);

            let Uskills=document.getElementById("SKILLS").value;
            let skills_value="";
                if(document.getElementById("html").checked){
                    skills_value+=document.getElementById("html").value;
                    skills_value+=", "
                }
                if(document.getElementById("css").checked){
                    skills_value+=document.getElementById("css").value;
                    skills_value+=", "
                }
                if(document.getElementById("hibernate").checked){
                    skills_value+=document.getElementById("hibernate").value;
                    skills_value+=", "
                }
                if(document.getElementById("python").checked){
                    skills_value+=document.getElementById("python").value;
                    skills_value+=", "
                }
                if(document.getElementById("java").checked){
                    skills_value+=document.getElementById("java").value;
                    skills_value+=", "
                }
                if(document.getElementById("javascript").checked){
                    skills_value+=document.getElementById("javascript").value;
                    skills_value+=", "
                }
                if(document.getElementById("mysql").checked){
                    skills_value+=document.getElementById("mysql").value;
                    skills_value+=", "
                }
                if(document.getElementById("springboot").checked){
                    skills_value+=document.getElementById("springboot").value;
                    skills_value+=", "
                }
            localStorage.setItem("Skills",skills_value);

            let Uimage=document.getElementById("IMAGE").value;
            localStorage.setItem("Image",Uimage);

            return false;
        }
    </script>
</head>

<body>
<br>
<h1 align=center> <u><b> REGISTRATION FORM </b></u></h1>
<div class="container">
    <form method="post" action="file2.html" enctype="multipart/form-data" name="register" >
        <form  action="/file2"  th:action="@{/addForm}" method="post" enctype="multipart/form-data">
<!--        th:action="/file2"-->
<!--        action="file2.html"-->
        <div class="form-group">
            <div class="col-xs-2">
                <label for="ex1">Name</label>
                <input class="form-control" type="text" id="NAME" name="name" required pattern="[A-Za-z]{3,26}"  title="Name should contain only english alphabets and length should be in the range 3 to 26">
            </div>

            <div class="col-xs-3">
                <label for="ex2">Email</label>
                <input class="form-control" type="text" id="EMAIL" name="email" required pattern="^(.+)@(.+)"  title="Email should be of type eg:abc@gmail.com">
            </div>

            <div class="col-xs-4">
                <label for="ex3">Mobile</label>
                <input class="form-control" type="text" id="MOBILE" name="mobile" min="6" required pattern="[6789][0-9]{9}"  title="Mobile number should contain only 10 digits">
            </div>

            <br>
            <div class="col-xs-4">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <label class="input-group-text" for="inputGroupSelect01" >State</label>
                    </div>
                    <select required class="custom-select" id="STATE" name="state"" >
                        <option value="" >Select State</option>
                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                        <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                        <option value="Assam">Assam</option>
                        <option value="Bihar">Bihar</option>
                        <option value="Chandigarh">Chandigarh</option>
                        <option value="Chhattisgarh">Chhattisgarh</option>
                        <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                        <option value="Daman and Diu">Daman and Diu</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Lakshadweep">Lakshadweep</option>
                        <option value="Puducherry">Puducherry</option>
                        <option value="Goa">Goa</option>
                        <option value="Gujarat">Gujarat</option>
                        <option value="Haryana">Haryana</option>
                        <option value="Himachal Pradesh">Himachal Pradesh</option>
                        <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                        <option value="Jharkhand">Jharkhand</option>
                        <option value="Karnataka">Karnataka</option>
                        <option value="Kerala">Kerala</option>
                        <option value="Madhya Pradesh">Madhya Pradesh</option>
                        <option value="Maharashtra">Maharashtra</option>
                        <option value="Manipur">Manipur</option>
                        <option value="Meghalaya">Meghalaya</option>
                        <option value="Mizoram">Mizoram</option>
                        <option value="Nagaland">Nagaland</option>
                        <option value="Odisha">Odisha</option>
                        <option value="Punjab">Punjab</option>
                        <option value="Rajasthan">Rajasthan</option>
                        <option value="Sikkim">Sikkim</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <option value="Telangana">Telangana</option>
                        <option value="Tripura">Tripura</option>
                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                        <option value="Uttarakhand">Uttarakhand</option>
                        <option value="West Bengal">West Bengal</option>
                    </select>
                </div>
            </div>
            Skills
            <br>
            <div class="col-xs-4" id="SKILLS">
                <input type="checkbox" id="html" name="skills" value="HTML" > HTML</input> &nbsp;
                <input type="checkbox" id="css" name="skills" value="CSS" > CSS </input>&nbsp;
                <input type="checkbox" id="hibernate" name="skills" value="Hibernate" > Hibernate </input> &nbsp;
                <input type="checkbox" id="python" name="skills" value="Python" > Python </input> &nbsp;
                <input type="checkbox" id="java" name="skills" value="Java" > Java </input> &nbsp;
                <input type="checkbox" id="javascript" name="skills" value="JavaScript" > JavaScript </input>&nbsp;
                <input type="checkbox" id="mysql" name="skills" value="MySQL" > MySQL </input> &nbsp;
                <input type="checkbox" id="springboot" name="skills" value="Springboot" > Springboot </input> &nbsp;
            </div>

            <br>
            Gender
            <div class="col-xs-2" id="GENDERS">
                Male <input type="radio" id="M" name="gender" value="Male" /> &nbsp;
                Female <input type="radio" id="F" name="gender" value="Female"  />
            </div>

            <br>
            <div class="col-xs-2">
                <div class="form-group">
                        <label for="exampleFormControlFile1" >Upload Image</label>
                        <input type="file"  class="form-control-file" required name="image" pattern=".jpg" title="Upload image.">
<!--                    enctype="multipart/form-data"-->
<!--                    class="profileImage"-->
                </div>
            </div>
        </button>

            <br>

            <input type="hidden" id="id">
            <a href="http://localhost:63342/SpringBoot_v2/templates/file2.html">
            <input id="sub" type="submit" class="btn btn-primary" onclick="passValues()">
            </a>
            <input type="reset" class="btn btn-primary">
        </div>
    </form>


        <form  action="#"  th:action="@{/addUserDetails}" th:object="${userDetailsAndSkills}" method="post" enctype="multipart/form-data">
            <input required type="hidden" name="oldEmail" th:value="${userDetailsAndSkills.email}"/>

            <div class="form-group">
                <label for="name">Name</label>
                <input  required id="name" name="name" type="text"  class="form-control" th:field="*{name}" placeholder="Enter Name"/>
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input required id="email" name="email" type="email" th:field="*{email}"
                       placeholder="Enter Email"/>
            </div>

            <div class="form-group">
                <label for="phone">Phone</label>
                <input  required id="phone" name="phone" type="text" th:field="*{phone}"
                        placeholder="Enter Phone"/>
                <p class="alert alert-danger" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" />
            </div>

            <div class="form-group">
                <label for="state">State</label>
                <input required id="state" name="state" type="text" th:field="*{state}"
                       placeholder="Enter State"/>
            </div>

            <div class="form-group">
                <p>Gender</p>
                <div class="form-check">

                    <input required th:each="currgender: ${gendersList}" type="radio" th:field="*{gender}" th:value="${currgender.genderType}" th:text="${currgender.genderType}"/>

                </div>
            </div>

            <div class="form-group">
                <p>Skills</p>
                <select name="skills" class="form-select"  aria-label="Default select example"
                        required multiple="multiple" th:field="*{skills}">
                    <option th:each="currskill : ${skillsList}" th:value="${currskill}"  th:text="${currskill}"/>
                </select>
            </div>

<script>
    $('#sub').click((e)=>{

        let form_dta = {};
        for (const value of $('form').serializeArray()) {
            form_dta[value.name] = value.value;
        }

        console.log(form_dta);
        let data = JSON.stringify(form_dta);
        fetch('http://localhost:9191/add', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: data,
        })
            .then((res) => res.json())
            .then((data) => {
                 window.location.href = 'http://localhost:63342/SpringBoot_v2/templates/index.html';
            })
            .catch((err) => console.log(err));
    });
</script>
</body>
</html>